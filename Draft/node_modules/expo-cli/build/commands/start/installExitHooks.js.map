{"version":3,"sources":["../../../src/commands/start/installExitHooks.ts"],"names":["installExitHooks","projectRoot","killSignals","signal","process","on","spinner","text","color","start","Log","setSpinner","Project","stopAsync","then","stopAndPersist","symbol","exit","catch","error","fail"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEO,SAASA,gBAAT,CAA0BC,WAA1B,EAAqD;AAC1D,QAAMC,WAAkC,GAAG,CAAC,QAAD,EAAW,SAAX,CAA3C;;AACA,OAAK,MAAMC,MAAX,IAAqBD,WAArB,EAAkC;AAChCE,IAAAA,OAAO,CAACC,EAAR,CAAWF,MAAX,EAAmB,MAAM;AACvB,YAAMG,OAAO,GAAG,oBAAI;AAAEC,QAAAA,IAAI,EAAE,iBAAR;AAA2BC,QAAAA,KAAK,EAAE;AAAlC,OAAJ,EAAiDC,KAAjD,EAAhB;;AACAC,qBAAIC,UAAJ,CAAeL,OAAf;;AACAM,qBAAQC,SAAR,CAAkBZ,WAAlB,EACGa,IADH,CACQ,MAAM;AACVR,QAAAA,OAAO,CAACS,cAAR,CAAuB;AAAER,UAAAA,IAAI,EAAE,gBAAR;AAA0BS,UAAAA,MAAM,EAAG;AAAnC,SAAvB;AACAZ,QAAAA,OAAO,CAACa,IAAR;AACD,OAJH,EAKGC,KALH,CAKSC,KAAK,IAAI;AACdb,QAAAA,OAAO,CAACc,IAAR,CAAa,uBAAb;;AACAV,uBAAIS,KAAJ,CAAUA,KAAV;AACD,OARH;AASD,KAZD;AAaD;AACF","sourcesContent":["import { Project } from '@expo/xdl';\nimport ora from 'ora';\n\nimport Log from '../../log';\n\nexport function installExitHooks(projectRoot: string): void {\n  const killSignals: ['SIGINT', 'SIGTERM'] = ['SIGINT', 'SIGTERM'];\n  for (const signal of killSignals) {\n    process.on(signal, () => {\n      const spinner = ora({ text: 'Stopping server', color: 'white' }).start();\n      Log.setSpinner(spinner);\n      Project.stopAsync(projectRoot)\n        .then(() => {\n          spinner.stopAndPersist({ text: 'Stopped server', symbol: `\\u203A` });\n          process.exit();\n        })\n        .catch(error => {\n          spinner.fail('Failed to stop server');\n          Log.error(error);\n        });\n    });\n  }\n}\n"],"file":"installExitHooks.js"}